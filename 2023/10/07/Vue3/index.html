<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue3 | å°è˜‘è‡ğŸ„</title><meta name="keywords" content="Vue3"><meta name="author" content="å°è˜‘è‡ğŸ„"><meta name="copyright" content="å°è˜‘è‡ğŸ„"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3å¿«é€Ÿä¸Šæ‰‹Vue3ç®€ä»‹ 2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰ è€—æ—¶2å¹´å¤šã€2600+æ¬¡æäº¤ã€30+ä¸ªRFCã€600+æ¬¡PRã€99ä½è´¡çŒ®è€… githubä¸Šçš„tagsåœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next&#x2F;releases&#x2F;tag&#x2F;v3.0.0  Vue3å¸¦æ¥äº†ä»€ä¹ˆæ€§èƒ½çš„æå‡ æ‰“åŒ…å¤§å°å‡å°‘41%  åˆæ¬¡æ¸²æŸ“å¿«55%">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3">
<meta property="og:url" content="http://example.com/2023/10/07/Vue3/index.html">
<meta property="og:site_name" content="å°è˜‘è‡ğŸ„">
<meta property="og:description" content="Vue3å¿«é€Ÿä¸Šæ‰‹Vue3ç®€ä»‹ 2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰ è€—æ—¶2å¹´å¤šã€2600+æ¬¡æäº¤ã€30+ä¸ªRFCã€600+æ¬¡PRã€99ä½è´¡çŒ®è€… githubä¸Šçš„tagsåœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;vuejs&#x2F;vue-next&#x2F;releases&#x2F;tag&#x2F;v3.0.0  Vue3å¸¦æ¥äº†ä»€ä¹ˆæ€§èƒ½çš„æå‡ æ‰“åŒ…å¤§å°å‡å°‘41%  åˆæ¬¡æ¸²æŸ“å¿«55%">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png">
<meta property="article:published_time" content="2023-10-07T02:29:56.000Z">
<meta property="article:modified_time" content="2023-10-11T14:06:38.624Z">
<meta property="article:author" content="å°è˜‘è‡ğŸ„">
<meta property="article:tag" content="Vue3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/10/07/Vue3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-11 22:06:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fnimg.ws.126.net%2F%3Furl%3Dhttp%253A%252F%252Fdingyue.ws.126.net%252Fnp0Wp8eOOpvOmnsrhaOeqAi7fV4LsgReQ2ftwGOzRhKuI1626409770197.jpeg%26thumbnail%3D650x2147483647%26quality%3D80%26type%3Djpg&amp;refer=http%3A%2F%2Fnimg.ws.126.net&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1660823921&amp;t=90a249f43fd689abb4be95ed9b3e64ab')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">å°è˜‘è‡ğŸ„</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-10-07T02:29:56.000Z" title="å‘è¡¨äº 2023-10-07 10:29:56">2023-10-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-10-11T14:06:38.624Z" title="æ›´æ–°äº 2023-10-11 22:06:38">2023-10-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue3/">Vue3</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>31åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Vue3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Vue3å¿«é€Ÿä¸Šæ‰‹"><a href="#Vue3å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="Vue3å¿«é€Ÿä¸Šæ‰‹"></a>Vue3å¿«é€Ÿä¸Šæ‰‹</h1><h2 id="Vue3ç®€ä»‹"><a href="#Vue3ç®€ä»‹" class="headerlink" title="Vue3ç®€ä»‹"></a>Vue3ç®€ä»‹</h2><ul>
<li>2020å¹´9æœˆ18æ—¥ï¼ŒVue.jså‘å¸ƒ3.0ç‰ˆæœ¬ï¼Œä»£å·ï¼šOne Pieceï¼ˆæµ·è´¼ç‹ï¼‰</li>
<li>è€—æ—¶2å¹´å¤šã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/commit-activity">2600+æ¬¡æäº¤</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">30+ä¸ªRFC</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/graphs/contributors">99ä½è´¡çŒ®è€…</a></li>
<li>githubä¸Šçš„tagsåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-next/releases/tag/v3.0.0">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>
</ul>
<h2 id="Vue3å¸¦æ¥äº†ä»€ä¹ˆ"><a href="#Vue3å¸¦æ¥äº†ä»€ä¹ˆ" class="headerlink" title="Vue3å¸¦æ¥äº†ä»€ä¹ˆ"></a>Vue3å¸¦æ¥äº†ä»€ä¹ˆ</h2><h3 id="æ€§èƒ½çš„æå‡"><a href="#æ€§èƒ½çš„æå‡" class="headerlink" title="æ€§èƒ½çš„æå‡"></a>æ€§èƒ½çš„æå‡</h3><ul>
<li><p>æ‰“åŒ…å¤§å°å‡å°‘41%</p>
</li>
<li><p>åˆæ¬¡æ¸²æŸ“å¿«55%, æ›´æ–°æ¸²æŸ“å¿«133%</p>
</li>
<li><p>å†…å­˜å‡å°‘54%</p>
<p>â€¦â€¦</p>
</li>
</ul>
<h3 id="æºç çš„å‡çº§"><a href="#æºç çš„å‡çº§" class="headerlink" title="æºç çš„å‡çº§"></a>æºç çš„å‡çº§</h3><ul>
<li><p>ä½¿ç”¨Proxyä»£æ›¿definePropertyå®ç°å“åº”å¼</p>
</li>
<li><p>é‡å†™è™šæ‹ŸDOMçš„å®ç°å’ŒTree-Shaking</p>
<p>â€¦â€¦</p>
</li>
</ul>
<h3 id="æ‹¥æŠ±TypeScript"><a href="#æ‹¥æŠ±TypeScript" class="headerlink" title="æ‹¥æŠ±TypeScript"></a>æ‹¥æŠ±TypeScript</h3><ul>
<li>Vue3å¯ä»¥æ›´å¥½çš„æ”¯æŒTypeScript</li>
</ul>
<h3 id="æ–°çš„ç‰¹æ€§"><a href="#æ–°çš„ç‰¹æ€§" class="headerlink" title="æ–°çš„ç‰¹æ€§"></a>æ–°çš„ç‰¹æ€§</h3><ol>
<li><p>Composition APIï¼ˆç»„åˆAPIï¼‰</p>
<ul>
<li>setupé…ç½®</li>
<li>refä¸reactive</li>
<li>watchä¸watchEffect</li>
<li>provideä¸inject</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li><p>æ–°çš„å†…ç½®ç»„ä»¶</p>
<ul>
<li>Fragment</li>
<li>Teleport</li>
<li>Suspense</li>
</ul>
</li>
<li><p>å…¶ä»–æ”¹å˜</p>
<ul>
<li>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</li>
<li>data é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</li>
<li>ç§»é™¤keyCodeæ”¯æŒä½œä¸º v-on çš„ä¿®é¥°ç¬¦</li>
<li>â€¦â€¦</li>
</ul>
</li>
</ol>
<hr>
<h1 id="åˆ›å»ºVue3-0å·¥ç¨‹"><a href="#åˆ›å»ºVue3-0å·¥ç¨‹" class="headerlink" title="åˆ›å»ºVue3.0å·¥ç¨‹"></a>åˆ›å»ºVue3.0å·¥ç¨‹</h1><h2 id="ä½¿ç”¨-vue-cli-åˆ›å»º"><a href="#ä½¿ç”¨-vue-cli-åˆ›å»º" class="headerlink" title="ä½¿ç”¨ vue-cli åˆ›å»º"></a>ä½¿ç”¨ vue-cli åˆ›å»º</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue --version</span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment">## åˆ›å»º</span></span><br><span class="line">vue create vue_test</span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-vite-åˆ›å»º"><a href="#ä½¿ç”¨-vite-åˆ›å»º" class="headerlink" title="ä½¿ç”¨ vite åˆ›å»º"></a>ä½¿ç”¨ vite åˆ›å»º</h2><p>å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>viteå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a></p>
<ul>
<li>ä»€ä¹ˆæ˜¯viteï¼Ÿâ€”â€” æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚</li>
<li>ä¼˜åŠ¿å¦‚ä¸‹ï¼š<ul>
<li>å¼€å‘ç¯å¢ƒä¸­ï¼Œæ— éœ€æ‰“åŒ…æ“ä½œï¼Œå¯å¿«é€Ÿçš„å†·å¯åŠ¨ã€‚</li>
<li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆHMRï¼‰ã€‚</li>
<li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li>
</ul>
</li>
<li>webpackä¼ ç»Ÿæ„å»º ä¸ viteæ„å»ºå¯¹æ¯”å›¾<br><img src="/images/%E4%BC%A0%E7%BB%9F%E6%9E%84%E5%BB%BA.webp" alt="Image text"><br><img src="/images/vite%E6%9E%84%E5%BB%BA.webp" alt="Image text"></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## åˆ›å»ºå·¥ç¨‹</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## è¿›å…¥å·¥ç¨‹ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## è¿è¡Œ</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h2 id="åˆ†æå·¥ç¨‹ç»“æ„"><a href="#åˆ†æå·¥ç¨‹ç»“æ„" class="headerlink" title="åˆ†æå·¥ç¨‹ç»“æ„"></a>åˆ†æå·¥ç¨‹ç»“æ„</h2><ul>
<li>å…¥å£æ–‡ä»¶main.jsçš„ä¸åŒ<h3 id="vue2"><a href="#vue2" class="headerlink" title="vue2"></a>vue2</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥vueæ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// å¼•å…¥æ‰€æœ‰ç»„ä»¶çš„å¤–å£³ç»„ä»¶app(appæ˜¯æ±‡æ€»æ‰€æœ‰çš„ç»„ä»¶)</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="comment">// el: &#x27;#app&#x27;,</span></span><br><span class="line">    <span class="comment">// render: (h) =&gt; &#123; return h(App)&#125;</span></span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>) <span class="comment">// renderå‡½æ•°ï¼ˆé…ç½®é¡¹ï¼‰,vueä¼šè°ƒç”¨renderå‡½æ•°å¹¶æŠŠhä¼ è¿›æ¥ï¼Œhå«æ¸²æŸ“å‡½æ•°</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// #app é¡µé¢å®¹å™¨id</span></span><br><span class="line">vm.$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h3><ul>
<li>vue3ç»„ä»¶ä¸­çš„æ¨¡ç‰ˆç»“æ„å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ä¸€ä¸ªåä¸ºcreateAppçš„å·¥å‚å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºåº”ç”¨å®ä¾‹å¯¹è±¡-app(ç±»ä¼¼äºvue2ä¸­çš„vmï¼Œä½†appæ¯”vmæ›´&quot;è½»&quot;)</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="å¸¸ç”¨-Composition-API"><a href="#å¸¸ç”¨-Composition-API" class="headerlink" title="å¸¸ç”¨ Composition API"></a>å¸¸ç”¨ Composition API</h1><p>å®˜æ–¹æ–‡æ¡£: <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>
<h2 id="æ‹‰å¼€åºå¹•çš„setup"><a href="#æ‹‰å¼€åºå¹•çš„setup" class="headerlink" title="æ‹‰å¼€åºå¹•çš„setup"></a>æ‹‰å¼€åºå¹•çš„setup</h2><ol>
<li>ç†è§£ï¼šVue3.0ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼ä¸ºä¸€ä¸ªå‡½æ•°(ç»„åˆå¼APIå°±æ˜¯ä¸€å †å†…ç½®çš„å‡½æ•°)ã€‚</li>
<li>setupæ˜¯æ‰€æœ‰<strong style="color:#DD5145">Composition APIï¼ˆç»„åˆAPIï¼‰</strong><i style="color:gray;font-weight:bold">â€œ è¡¨æ¼”çš„èˆå° â€</i>ã€‚</li>
<li>ç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ç­‰ç­‰ï¼Œå‡è¦é…ç½®åœ¨setupä¸­ã€‚</li>
<li>setupå‡½æ•°çš„ä¸¤ç§è¿”å›å€¼ï¼š<ol>
<li>è‹¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•, åœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ï¼ˆé‡ç‚¹å…³æ³¨ï¼ï¼‰</li>
<li><span style="color:#aad">è‹¥è¿”å›ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ã€‚ï¼ˆäº†è§£ï¼‰</span></li>
</ol>
</li>
<li>setupæ¯”beforeCreateå…ˆæ‰§è¡Œ</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;h&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">    <span class="comment">// æ­¤å¤„åªæ˜¯æµ‹è¯•ä¸€ä¸‹setupï¼Œæš‚æ—¶ä¸è€ƒè™‘å“åº”å¼çš„é—®é¢˜</span></span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">// æ¨¡ç‰ˆå­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">`æˆ‘å«<span class="subst">$&#123;name&#125;</span>ï¼Œæˆ‘<span class="subst">$&#123;age&#125;</span>å²äº†ï¼Œä½ å¥½å“‡ï¼`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// return &#123;</span></span><br><span class="line">    <span class="comment">//   name,</span></span><br><span class="line">    <span class="comment">//   age,</span></span><br><span class="line">    <span class="comment">//   sayHello</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¿”å›å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="string">&#x27;æµ‹è¯•&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>æ³¨æ„ç‚¹ï¼š<ol>
<li>å°½é‡ä¸è¦ä¸Vue2.xé…ç½®æ··ç”¨<ul>
<li>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ä¸­<strong style="color:#DD5145">å¯ä»¥è®¿é—®åˆ°</strong>setupä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li>
<li>ä½†åœ¨setupä¸­<strong style="color:#DD5145">ä¸èƒ½è®¿é—®åˆ°</strong>Vue2.xé…ç½®ï¼ˆdataã€methosã€computedâ€¦ï¼‰ã€‚</li>
<li>å¦‚æœæœ‰é‡å, setupä¼˜å…ˆã€‚</li>
</ul>
</li>
<li>setupä¸èƒ½æ˜¯ä¸€ä¸ªasyncå‡½æ•°ï¼Œå› ä¸ºè¿”å›å€¼ä¸å†æ˜¯returnçš„å¯¹è±¡, è€Œæ˜¯promise(åŒ…è£¹çš„å¯¹è±¡), æ¨¡æ¿çœ‹ä¸åˆ°returnå¯¹è±¡ä¸­çš„å±æ€§ã€‚ï¼ˆåæœŸä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œä½†éœ€è¦Suspenseå’Œå¼‚æ­¥ç»„ä»¶çš„é…åˆï¼‰</li>
</ol>
</li>
</ol>
<h2 id="refå‡½æ•°"><a href="#refå‡½æ•°" class="headerlink" title="refå‡½æ•°"></a>refå‡½æ•°</h2><ul>
<li><p>ä½œç”¨: å®šä¹‰ä¸€ä¸ªå“åº”å¼çš„æ•°æ®</p>
</li>
<li><p>è¯­æ³•: <code>const xxx = ref(initValue)</code></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåŒ…å«å“åº”å¼æ•°æ®çš„<strong style="color:#DD5145">å¼•ç”¨å¯¹è±¡ï¼ˆreferenceå¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼‰</strong>ã€‚</li>
<li>JSä¸­æ“ä½œæ•°æ®ï¼š <code>xxx.value</code></li>
<li>æ¨¡æ¿ä¸­è¯»å–æ•°æ®: ä¸éœ€è¦.valueï¼Œç›´æ¥ï¼š<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>) <span class="comment">// refå¼•ç”¨å¯¹è±¡---&gt;å¼•ç”¨å®ç°å¯¹è±¡RefImpl</span></span><br><span class="line">        <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>);</span><br><span class="line">        <span class="keyword">let</span> job = <span class="title function_">ref</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;å‰ç«¯å·¥ç¨‹å¸ˆ&#x27;</span>,</span><br><span class="line">            <span class="attr">salary</span>: <span class="string">&#x27;30k&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">            name.<span class="property">value</span> = <span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line">            age.<span class="property">value</span> = <span class="number">20</span>;</span><br><span class="line">            job.<span class="property">value</span>.<span class="property">type</span> = <span class="string">&#x27;UIè®¾è®¡å¸ˆ&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name,</span><br><span class="line">            age,</span><br><span class="line">            changeInfo</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/ref%E8%A7%A3%E6%9E%90%E5%9B%BE.png" alt="Image text"></li>
</ul>
</li>
<li><p>refå®šä¹‰åŸºç¡€ç±»å‹å’Œå¯¹è±¡ç±»å‹è§£æ<br><img src="/images/ref%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B.png" alt="Image text"></p>
</li>
<li><p>å¤‡æ³¨ï¼š</p>
<ul>
<li>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼šåŸºæœ¬ç±»å‹ã€ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ã€‚</li>
<li>åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼šå“åº”å¼ä¾ç„¶æ˜¯é <code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>å®Œæˆçš„ã€‚</li>
<li>å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼šå†…éƒ¨ <i style="color:gray;font-weight:bold">â€œ æ±‚åŠ© â€</i> äº†Vue3.0ä¸­çš„ä¸€ä¸ªæ–°å‡½æ•°â€”â€” <code>reactive</code>å‡½æ•°ã€‚<br><img src="/images/ref%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90.jpg" alt="Image text"></li>
</ul>
</li>
</ul>
<h2 id="reactiveå‡½æ•°"><a href="#reactiveå‡½æ•°" class="headerlink" title="reactiveå‡½æ•°"></a>reactiveå‡½æ•°</h2><ul>
<li>ä½œç”¨: å®šä¹‰ä¸€ä¸ª<strong style="color:#DD5145">å¯¹è±¡ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>å‡½æ•°ï¼‰</li>
<li>è¯­æ³•ï¼š<code>const ä»£ç†å¯¹è±¡= reactive(æºå¯¹è±¡)</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ï¼Œè¿”å›ä¸€ä¸ª<strong style="color:#DD5145">ä»£ç†å¯¹è±¡ï¼ˆProxyçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°proxyå¯¹è±¡ï¼‰</strong></li>
<li>reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡çš„â€ã€‚</li>
<li>å†…éƒ¨åŸºäº ES6 çš„ Proxy å®ç°ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡æ“ä½œæºå¯¹è±¡å†…éƒ¨æ•°æ®è¿›è¡Œæ“ä½œã€‚<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> job = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;å‰ç«¯å·¥ç¨‹å¸ˆ&#x27;</span>,</span><br><span class="line">            <span class="attr">salary</span>: <span class="string">&#x27;30k&#x27;</span>,</span><br><span class="line">            <span class="attr">a</span>: &#123;</span><br><span class="line">                <span class="attr">b</span>: &#123;</span><br><span class="line">                    <span class="attr">c</span>: <span class="number">666</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> hobby = [<span class="string">&#x27;æŠ½çƒŸ&#x27;</span>, <span class="string">&#x27;å–é…’&#x27;</span>, <span class="string">&#x27;çƒ«å¤´&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">            <span class="attr">job</span>: &#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;å‰ç«¯å·¥ç¨‹å¸ˆ&#x27;</span>,</span><br><span class="line">                <span class="attr">salary</span>: <span class="string">&#x27;30k&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">hobby</span>: [<span class="string">&#x27;æŠ½çƒŸ&#x27;</span>, <span class="string">&#x27;å–é…’&#x27;</span>, <span class="string">&#x27;çƒ«å¤´&#x27;</span>]</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">changeInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">            job.<span class="property">type</span> = <span class="string">&#x27;UIè®¾è®¡å¸ˆ&#x27;</span>;</span><br><span class="line">            job.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">999</span>;</span><br><span class="line">            hobby[<span class="number">0</span>] = <span class="string">&#x27;å­¦ä¹ &#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            job,</span><br><span class="line">            hobby,</span><br><span class="line">            person,</span><br><span class="line">            changeInfo</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/images/reactive%E8%A7%A3%E6%9E%90%E5%9B%BE.png" alt="Image text"><br><img src="/images/reactive%E5%87%BD%E6%95%B0.jpg" alt="Image text"></li>
</ul>
<h2 id="Vue3-0ä¸­çš„å“åº”å¼åŸç†"><a href="#Vue3-0ä¸­çš„å“åº”å¼åŸç†" class="headerlink" title="Vue3.0ä¸­çš„å“åº”å¼åŸç†"></a>Vue3.0ä¸­çš„å“åº”å¼åŸç†</h2><h3 id="vue2-xçš„å“åº”å¼"><a href="#vue2-xçš„å“åº”å¼" class="headerlink" title="vue2.xçš„å“åº”å¼"></a>vue2.xçš„å“åº”å¼</h3><ul>
<li><p>å®ç°åŸç†ï¼š</p>
<ul>
<li><p>å¯¹è±¡ç±»å‹ï¼šé€šè¿‡<code>Object.defineProperty()</code>å¯¹å±æ€§çš„è¯»å–ã€ä¿®æ”¹è¿›è¡Œæ‹¦æˆªï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</p>
</li>
<li><p>æ•°ç»„ç±»å‹ï¼šé€šè¿‡é‡å†™æ›´æ–°æ•°ç»„çš„ä¸€ç³»åˆ—æ–¹æ³•æ¥å®ç°æ‹¦æˆªã€‚ï¼ˆå¯¹æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">    get () &#123;&#125;, </span><br><span class="line">    set () &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å­˜åœ¨é—®é¢˜ï¼š</p>
<ul>
<li>å¯¹è±¡æ–°å¢å±æ€§ã€åˆ é™¤å±æ€§, ç•Œé¢ä¸ä¼šæ›´æ–°ã€‚(å¯ä»¥ä½¿ç”¨this.$setï¼ŒVue.setï¼Œthis.$deleteï¼ŒVue.deleteå®ç°)</li>
<li>æ•°ç»„ç›´æ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„, ç•Œé¢ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚(å¯ä»¥ä½¿ç”¨this.$setï¼ŒVue.setï¼Œspliceå®ç°)</li>
</ul>
</li>
</ul>
<h3 id="Vue3-0çš„å“åº”å¼"><a href="#Vue3-0çš„å“åº”å¼" class="headerlink" title="Vue3.0çš„å“åº”å¼"></a>Vue3.0çš„å“åº”å¼</h3><ul>
<li><p>å®ç°åŸç†:</p>
<ul>
<li><p>é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰:  æ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±æ€§çš„å˜åŒ–, åŒ…æ‹¬ï¼šå±æ€§å€¼çš„è¯»å†™ã€å±æ€§çš„æ·»åŠ ã€å±æ€§çš„åˆ é™¤ç­‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">  <span class="comment">// æºæ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> person = &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®vue2ä¸­å®ç°å“åº”å¼</span></span><br><span class="line">  <span class="keyword">let</span> p = &#123;&#125;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(p, <span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">configurable</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ä»¥åˆ é™¤</span></span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123; <span class="comment">// æœ‰äººè¯»å–nameæ—¶è°ƒç”¨</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººè¯»å–nameå±æ€§`</span>)</span><br><span class="line">          <span class="keyword">return</span> person.<span class="property">name</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123; <span class="comment">// æœ‰äººä¿®æ”¹nameæ—¶è°ƒç”¨</span></span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººä¿®æ”¹äº†nameå±æ€§ï¼Œè¦å»æ›´æ–°ç•Œé¢äº†ï¼`</span>)</span><br><span class="line">          person.<span class="property">name</span> = value</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¹æ®vue3ä¸­å®ç°å“åº”å¼, Proxyå«ä»£ç†</span></span><br><span class="line">  <span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person, &#123;</span><br><span class="line">      <span class="comment">// æœ‰äººè¯»å–p1çš„æŸä¸ªå±æ€§æ—¶è°ƒç”¨</span></span><br><span class="line">      <span class="title function_">get</span>(<span class="params">target, propName</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººè¯»å–äº†p1èº«ä¸Šçš„<span class="subst">$&#123;propName&#125;</span>å±æ€§`</span>)</span><br><span class="line">          <span class="keyword">return</span> target[propName]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// æœ‰äººä¿®æ”¹p1çš„æŸä¸ªå±æ€§æˆ–ç»™p1è¿½åŠ æŸä¸ªå±æ€§æ—¶è°ƒç”¨</span></span><br><span class="line">      <span class="title function_">set</span>(<span class="params">target, propName, value</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººä¿®æ”¹äº†p1èº«ä¸Šçš„<span class="subst">$&#123;propName&#125;</span>å±æ€§ï¼Œè¦å»æ›´æ–°ç•Œé¢äº†ï¼`</span>)</span><br><span class="line">          target[propName] = value</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// æœ‰äººåˆ é™¤p1çš„æŸä¸ªå±æ€§æ—¶è°ƒç”¨</span></span><br><span class="line">      <span class="title function_">deleteProperty</span>(<span class="params">target, propName</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººåˆ é™¤äº†p1èº«ä¸Šçš„<span class="subst">$&#123;propName&#125;</span>å±æ€§ï¼Œè¦å»æ›´æ–°ç•Œé¢äº†ï¼`</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">delete</span> target[propName]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>é€šè¿‡Reflectï¼ˆåå°„ï¼‰:  å¯¹æºå¯¹è±¡çš„å±æ€§è¿›è¡Œæ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">    <span class="comment">// æºæ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;</span><br><span class="line">      <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">b</span>: <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šè¿‡Object.definePropertyæ“ä½œ</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// æŠ¥é”™ï¼ŒObject.definePropertyä¸èƒ½åŒæ—¶å®šä¹‰ç›¸åŒçš„å±æ€§</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">          <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">          <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡Reflect.definePropertyæ“ä½œ</span></span><br><span class="line">  <span class="keyword">const</span> x1 = <span class="title class_">Reflect</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// console.log(x1) ---&gt; true</span></span><br><span class="line">  <span class="keyword">const</span> x2 = <span class="title class_">Reflect</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&#x27;c&#x27;</span>, &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// console.log(x2) ---&gt; false</span></span><br><span class="line">  <span class="keyword">if</span>(x2)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆåŠŸ&#x27;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¤±è´¥&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>MDNæ–‡æ¡£ä¸­æè¿°çš„Proxyä¸Reflectï¼š</p>
<ul>
<li><p>Proxyï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>
</li>
<li><p>Reflectï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>
  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æºæ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line">    <span class="comment">// æ‹¦æˆªè¯»å–å±æ€§å€¼</span></span><br><span class="line">    get (target, propName) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, propName)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªè®¾ç½®å±æ€§å€¼æˆ–æ·»åŠ æ–°å±æ€§</span></span><br><span class="line">    set (target, propName, value) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, propName, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ‹¦æˆªåˆ é™¤å±æ€§</span></span><br><span class="line">    deleteProperty (target, propName) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, propName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">          </span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="reactiveå¯¹æ¯”ref"><a href="#reactiveå¯¹æ¯”ref" class="headerlink" title="reactiveå¯¹æ¯”ref"></a>reactiveå¯¹æ¯”ref</h2><ul>
<li>ä»å®šä¹‰æ•°æ®è§’åº¦å¯¹æ¯”ï¼š<ul>
<li> refç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€‚</li>
<li> reactiveç”¨æ¥å®šä¹‰ï¼š<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>ã€‚</li>
<li> å¤‡æ³¨ï¼šrefä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰<strong style="color:#DD5145">å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ç±»å‹æ•°æ®</strong>, å®ƒå†…éƒ¨ä¼šè‡ªåŠ¨é€šè¿‡<code>reactive</code>è½¬ä¸º<strong style="color:#DD5145">ä»£ç†å¯¹è±¡</strong>ã€‚</li>
</ul>
</li>
<li>ä»åŸç†è§’åº¦å¯¹æ¯”ï¼š<ul>
<li> refé€šè¿‡<code>Object.defineProperty()</code>çš„<code>get</code>ä¸<code>set</code>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰ã€‚</li>
<li> reactiveé€šè¿‡ä½¿ç”¨<strong style="color:#DD5145">ES6ä¸­çš„æ–°æ„é€ å‡½æ•°Proxy</strong>æ¥å®ç°å“åº”å¼ï¼ˆæ•°æ®åŠ«æŒï¼‰, å¹¶é€šè¿‡<strong style="color:#DD5145">Reflect</strong>æ“ä½œ<strong style="color:orange">æºå¯¹è±¡</strong>å†…éƒ¨çš„æ•°æ®ã€‚</li>
</ul>
</li>
<li>ä»ä½¿ç”¨è§’åº¦å¯¹æ¯”ï¼š<ul>
<li> refå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®<strong style="color:#DD5145">éœ€è¦</strong><code>.value</code>ï¼Œè¯»å–æ•°æ®æ—¶æ¨¡æ¿ä¸­ç›´æ¥è¯»å–<strong style="color:#DD5145">ä¸éœ€è¦</strong><code>.value</code>ã€‚</li>
<li> reactiveå®šä¹‰çš„æ•°æ®ï¼šæ“ä½œæ•°æ®ä¸è¯»å–æ•°æ®ï¼š<strong style="color:#DD5145">å‡ä¸éœ€è¦</strong><code>.value</code>ã€‚</li>
</ul>
</li>
</ul>
<h2 id="setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹"><a href="#setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹"></a>setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹</h2><ul>
<li><p>vue2ä¸­VueComponent</p>
<ul>
<li>å­ç»„ä»¶propsä¸æ¥æ”¶æ—¶ï¼ŒVueComponentä¸­$attrsä¸­ä¼šå­˜ï¼›å¦‚æœæ¥æ”¶ï¼Œ$attrsä¸­ä¸ä¼šå­˜</li>
<li>VueComponentä¸­$slotså­˜å‚¨æ’æ§½å†…å®¹</li>
<li>emit è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</li>
</ul>
</li>
<li><p>setupæ‰§è¡Œçš„æ—¶æœº</p>
<ul>
<li>åœ¨beforeCreateä¹‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œthisæ˜¯undefinedã€‚</li>
</ul>
</li>
<li><p>setupçš„å‚æ•°</p>
<ul>
<li>propsï¼šå€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä¸”ç»„ä»¶å†…éƒ¨å£°æ˜æ¥æ”¶äº†çš„å±æ€§ã€‚</li>
<li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡<ul>
<li>attrs: å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«ï¼šç»„ä»¶å¤–éƒ¨ä¼ é€’è¿‡æ¥ï¼Œä½†æ²¡æœ‰åœ¨propsé…ç½®ä¸­å£°æ˜çš„å±æ€§, ç›¸å½“äºvue2ä¸­çš„ <code>this.$attrs</code>ã€‚</li>
<li>slots: æ”¶åˆ°çš„æ’æ§½å†…å®¹, ç›¸å½“äºvue2ä¸­çš„ <code>this.$slots</code>ã€‚</li>
<li>emit: è§¦å‘è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°, ç›¸å½“äºvue2ä¸­çš„ <code>this.$emit</code>ã€‚<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--------çˆ¶ç»„ä»¶---------&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Demo</span> @<span class="attr">hello</span>=<span class="string">&quot;showHelloMsg&quot;</span> <span class="attr">msg</span>=<span class="string">&quot;ä½ å¥½&quot;</span> <span class="attr">school</span>=<span class="string">&quot;å­¦æ ¡&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:qwe</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ•™å®¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:qwe1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ•™å®¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Demo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Demo</span> <span class="keyword">from</span> <span class="string">&quot;@/components/Demo.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Demo</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">showHelloMsg</span>(<span class="params">val</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(<span class="string">`ä½ å¥½å“‡ï¼Œä½ å‡ºå‘äº†helloäº‹ä»¶ï¼Œæˆ‘æ”¶åˆ°çš„å‚æ•°æ˜¯ï¼š<span class="subst">$&#123;val&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      showHelloMsg</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--------å­ç»„ä»¶---------&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å§“åï¼š&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>æµ‹è¯•è§¦å‘äº‹ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;Demo&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: [<span class="string">&#x27;msg&#x27;</span>, <span class="string">&#x27;school&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">emits</span>: [<span class="string">&#x27;hello&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params">props, context</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log(&#x27;---props---&#x27;, props)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log(&#x27;---context---&#x27;, context.attrs) // ç›¸å½“äºvue2ä¸­çš„$attrs</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log(&#x27;---context---&#x27;, context.emit) // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---context---&#x27;</span>, context.<span class="property">slots</span>) <span class="comment">// ç›¸å½“äºvue2ä¸­çš„$attrs</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">age</span>: <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      context.<span class="title function_">emit</span>(<span class="string">&#x27;hello&#x27;</span>, <span class="number">666</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      person,</span></span><br><span class="line"><span class="language-javascript">      test</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è®¡ç®—å±æ€§ä¸ç›‘è§†"><a href="#è®¡ç®—å±æ€§ä¸ç›‘è§†" class="headerlink" title="è®¡ç®—å±æ€§ä¸ç›‘è§†"></a>è®¡ç®—å±æ€§ä¸ç›‘è§†</h2><h3 id="computedå‡½æ•°"><a href="#computedå‡½æ•°" class="headerlink" title="computedå‡½æ•°"></a>computedå‡½æ•°</h3><ul>
<li><p>ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´</p>
</li>
<li><p>å†™æ³•</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  å§“ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;person.firstName&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;person.lastName&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨åï¼š&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨åï¼š&#123;&#123; person.fullName &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  å…¨åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;person.fullName&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;reactive, computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123; <span class="comment">// vue2,è®¡ç®—å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">fullName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">person</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">person</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">firstName</span>: <span class="string">&#x27;å¼ &#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lastName</span>: <span class="string">&#x27;ä¸‰&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// vue3è®¡ç®—å±æ€§-ç®€å†™ï¼ˆæ²¡æœ‰è€ƒè™‘è®¡ç®—å±æ€§è¢«ä¿®æ”¹çš„æƒ…å†µï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// ç®­å¤´å‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> fullName1 = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ™®é€šå‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> fullName1 = <span class="title function_">computed</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// vue3è®¡ç®—å±æ€§-å®Œæˆå†™æ³•ï¼ˆè€ƒè™‘è¯»å’Œå†™ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">        person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      person</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="watchå‡½æ•°"><a href="#watchå‡½æ•°" class="headerlink" title="watchå‡½æ•°"></a>watchå‡½æ•°</h3><ul>
<li><p>ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´</p>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›‘è§†è°ï¼Œå•ä¸ªå­—æ®µæˆ–å¤šä¸ªï¼ˆæ•°ç»„ï¼‰</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼šç›‘è§†çš„å›è°ƒ</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šç›‘è§†çš„é…ç½®å¯¹è±¡</li>
</ul>
</li>
<li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p>
<ul>
<li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚</li>
<li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§ï¼ˆå±æ€§æ˜¯å¯¹è±¡ï¼‰æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, reactive, watch&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span><br><span class="line">    <span class="attr">watch</span>: &#123; <span class="comment">// vue2ä¸­ç›‘å¬</span></span><br><span class="line">        <span class="comment">// ç®€å•å†™ï¼Œå‡½æ•°</span></span><br><span class="line">        <span class="title function_">sum</span>(<span class="params">newValue, oldValue</span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumçš„å€¼å˜åŒ–äº†&#x27;</span>, newValue, oldValue)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// å®Œæ•´å†™ï¼Œå¯¹è±¡</span></span><br><span class="line">        <span class="attr">sum</span>: &#123;</span><br><span class="line">          <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// ç«‹å³ç›‘å¬</span></span><br><span class="line">          <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// æ·±åº¦ç›‘å¬</span></span><br><span class="line">          <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumçš„å€¼å˜åŒ–äº†&#x27;</span>, newValue, oldValue)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// æ•°æ®</span></span><br><span class="line">        <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">let</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;ä½ å¥½å“‡&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">            <span class="attr">job</span>: &#123;</span><br><span class="line">                <span class="attr">j1</span>:&#123;</span><br><span class="line">                    <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„ä¸€ä¸ªå“åº”å¼æ•°æ®</span></span><br><span class="line">        <span class="title function_">watch</span>(sum,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">watch</span>(msg, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;msgçš„å€¼å˜åŒ–äº†&#x27;</span>, newValue, oldValue)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æƒ…å†µäºŒï¼šç›‘è§†refå®šä¹‰çš„å¤šä¸ªå“åº”å¼æ•°æ®</span></span><br><span class="line"><span class="comment">        *   å¦‚æœimmediateä¸ºtrue, ç¬¬ä¸€æ¬¡ç›‘å¬ç»“æœoldValueä¸ºç©ºæ•°ç»„</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="title function_">watch</span>([sum,msg],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sumæˆ–msgå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„ä¸€ä¸ªå“åº”å¼å¯¹è±¡æ•°æ®</span></span><br><span class="line"><span class="comment">        *   1ã€æ³¨æ„ï¼šè‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼ï¼ˆä¸newValueä¸€æ ·ï¼‰</span></span><br><span class="line"><span class="comment">        *   2ã€æ³¨æ„ï¼šè‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®æ— æ•ˆï¼‰</span></span><br><span class="line"><span class="comment">        *   3ã€å¦‚æœç‰¹åˆ«éœ€è¦oldValueï¼Œå¯ä»¥å°†å¯¹è±¡ä¸­çš„å€¼èµ‹äºˆrefå®šä¹‰çš„æ–°å€¼ï¼Œå†å¯¹æ–°å€¼ç›‘å¬</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">false</span>&#125;) <span class="comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§</span></span><br><span class="line"><span class="comment">        *   ä»ç„¶æ— æ³•è·å–oldValueæ­£ç¡®å€¼</span></span><br><span class="line"><span class="comment">        *   æœªå¼€å¯æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®æœ‰æ•ˆï¼‰</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span></span><br><span class="line"><span class="comment">        *   person.mameå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒoldValueå¯ä»¥è·å–æ­£ç¡®å€¼ï¼›è€Œperson.jobå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸èƒ½è·å–oldValueçš„æ­£ç¡®å€¼</span></span><br><span class="line"><span class="comment">        *   deepä¸ºfalseæ—¶ï¼Œperson.mameå‘ç”Ÿå˜åŒ–æ—¶å¯ä»¥ç›‘å¬åˆ°ï¼Œä½†æ˜¯person.jobå‘ç”Ÿå˜åŒ–æ—¶ä¸å¯ä»¥ç›‘å¬åˆ°æ•°æ®å˜åŒ–</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="title function_">watch</span>([<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">()=&gt;</span>person.<span class="property">name</span>],<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;,&#123;<span class="attr">immediate</span>:<span class="literal">true</span>,<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line"><span class="comment">        *   æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">        *  */</span></span><br><span class="line">        <span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">job</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personçš„jobå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">        &#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚ä½•ç›‘å¬refå®šä¹‰å¯¹è±¡æ•°æ®</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">ref</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">            <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æŠ¥é”™ï¼Œ</span></span><br><span class="line"><span class="comment">// å¦‚æœä½¿ç”¨sum.valueï¼Œå› ä¸ºsum.valueç­‰äº0ï¼Œç›¸ç­‰äºç›‘å¬0</span></span><br><span class="line"><span class="comment">// å¦‚æœä½¿ç”¨sumï¼Œåˆ™ç›‘è§†çš„æ˜¯RefImplå®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="title function_">watch</span>(sum.<span class="property">value</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// person.valueæ˜¯refå€ŸåŠ©reactiveå‡½æ•°ç”Ÿæˆçš„Proxyå®ä¾‹å¯¹è±¡ï¼Œ</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºç›‘å¬çš„æ˜¯reactiveæ‰€å®šä¹‰çš„æ•°æ®ï¼ˆreactiveå®šä¹‰çš„æ•°æ®æ˜¯è‡ªå®šå¼€å¯æ·±åº¦ç›‘å¬ï¼‰</span></span><br><span class="line"><span class="title function_">watch</span>(person.<span class="property">value</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// personæ˜¯RefImplå®ä¾‹å¯¹è±¡ï¼ŒåŠ ä¸Šdeep:true,æ·±åº¦ç›‘å¬ï¼Œå¯ä»¥ç›‘å¬RefImplå®ä¾‹å¯¹è±¡ä¸­value</span></span><br><span class="line"><span class="title function_">watch</span>(person,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;personå˜åŒ–äº†&#x27;</span>,newValue,oldValue)</span><br><span class="line">&#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="watchEffectå‡½æ•°"><a href="#watchEffectå‡½æ•°" class="headerlink" title="watchEffectå‡½æ•°"></a>watchEffectå‡½æ•°</h3><ul>
<li><p>watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p>
</li>
<li><p>watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ã€‚</p>
</li>
<li><p>watchEffectæœ‰ç‚¹åƒcomputedï¼šéƒ½æ˜¯åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™</p>
<ul>
<li>ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li>
<li>è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">            <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//watchEffectæ‰€æŒ‡å®šçš„å›è°ƒä¸­ç”¨åˆ°çš„æ•°æ®åªè¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ç›´æ¥é‡æ–°æ‰§è¡Œå›è°ƒã€‚</span></span><br><span class="line"><span class="comment">//ç›¸å½“äºwatchä½¿ç”¨äº†immediate</span></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> x1 = sum.<span class="property">value</span></span><br><span class="line">    <span class="keyword">const</span> x2 = person.<span class="property">age</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;watchEffecté…ç½®çš„å›è°ƒæ‰§è¡Œäº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h2><table>
<thead>
<tr>
<th>vue2.xçš„ç”Ÿå‘½å‘¨æœŸ</th>
<th>vue3.0çš„ç”Ÿå‘½å‘¨æœŸ</th>
</tr>
</thead>
<tbody><tr>
<td><img src="/images/vue2.x%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg" alt="Image text"></td>
<td><img src="/images/vue3.0%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg" alt="Image text"></td>
</tr>
</tbody></table>
<ul>
<li><p>Vue3.0ä¸­å¯ä»¥ç»§ç»­ä½¿ç”¨Vue2.xä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä½†æœ‰æœ‰ä¸¤ä¸ªè¢«æ›´åï¼š</p>
<ul>
<li><code>beforeDestroy</code>æ”¹åä¸º <code>beforeUnmount</code></li>
<li><code>destroyed</code>æ”¹åä¸º <code>unmounted</code></li>
</ul>
</li>
<li><p>Vue3.0ä¹Ÿæä¾›äº† Composition API å½¢å¼çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¸Vue2.xä¸­é’©å­å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>beforeCreate</code>===&gt;<code>setup()</code></li>
<li><code>created</code>=======&gt;<code>setup()</code></li>
<li><code>beforeMount</code> ===&gt;<code>onBeforeMount</code></li>
<li><code>mounted</code>=======&gt;<code>onMounted</code></li>
<li><code>beforeUpdate</code>===&gt;<code>onBeforeUpdate</code></li>
<li><code>updated</code> =======&gt;<code>onUpdated</code></li>
<li><code>beforeUnmount</code>====&gt;<code>onBeforeUnmount</code></li>
<li><code>unmounted</code> =====&gt;<code>onUnmounted</code></li>
</ul>
</li>
<li><p>ç»„åˆå¼APIä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ¯”é…ç½®é¡¹ä¸­çš„åŒæ ·ä½œç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­å…ˆæ‰§è¡Œ</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onBeforeMount,onMounted,onBeforeUpdate,onUpdated,onBeforeUnmount,onUnmounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Demo&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---setup---&#x27;</span>)</span><br><span class="line">        <span class="comment">//æ•°æ®</span></span><br><span class="line">        <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡ç»„åˆå¼APIçš„å½¢å¼å»ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">        <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeMount---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onMounted---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUpdate---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUpdated---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onBeforeUnmount---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---onUnmounted---&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//é€šè¿‡é…ç½®é¡¹çš„å½¢å¼ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">    <span class="comment">//#region </span></span><br><span class="line">    <span class="comment">/*beforeCreate() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---beforeCreate---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    created() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---created---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    beforeMount() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---beforeMount---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    mounted() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---mounted---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    beforeUpdate()&#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---beforeUpdate---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    updated() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---updated---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    beforeUnmount() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---beforeUnmount---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    unmounted() &#123;</span></span><br><span class="line"><span class="comment">        console.log(&#x27;---unmounted---&#x27;)</span></span><br><span class="line"><span class="comment">    &#125;,*/</span></span><br><span class="line">    <span class="comment">//#endregion</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰hookå‡½æ•°"><a href="#è‡ªå®šä¹‰hookå‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰hookå‡½æ•°"></a>è‡ªå®šä¹‰hookå‡½æ•°</h2><ul>
<li><p>ä»€ä¹ˆæ˜¯hookï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠsetupå‡½æ•°ä¸­ä½¿ç”¨çš„Composition APIè¿›è¡Œäº†å°è£…ã€‚</p>
</li>
<li><p>ç±»ä¼¼äºvue2.xä¸­çš„mixinã€‚</p>
</li>
<li><p>è‡ªå®šä¹‰hookçš„ä¼˜åŠ¿: å¤ç”¨ä»£ç , è®©setupä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p>
</li>
<li><p>hookæ–‡ä»¶åä¸€èˆ¬ä½¿ç”¨useå¼€å¤´</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰hookå‡½æ•°--æ–‡ä»¶usePoint.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted,onBeforeUnmount&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">	<span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ•°æ®</span></span><br><span class="line">	<span class="keyword">let</span> point = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">		<span class="attr">x</span>:<span class="number">0</span>,</span><br><span class="line">		<span class="attr">y</span>:<span class="number">0</span></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">function</span> <span class="title function_">savePoint</span>(<span class="params">event</span>)&#123;</span><br><span class="line">		point.<span class="property">x</span> = event.<span class="property">pageX</span></span><br><span class="line">		point.<span class="property">y</span> = event.<span class="property">pageY</span></span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">pageX</span>,event.<span class="property">pageY</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//å®ç°é¼ æ ‡â€œæ‰“ç‚¹â€ç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">	<span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,savePoint)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">		<span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>,savePoint)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä½¿ç”¨hookå‡½æ•°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯Testç»„ä»¶<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å½“å‰ç‚¹å‡»æ—¶é¼ æ ‡çš„åæ ‡ä¸ºï¼šxï¼š&#123;&#123;point.x&#125;&#125;ï¼Œyï¼š&#123;&#123;point.y&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> usePoint <span class="keyword">from</span> <span class="string">&#x27;../hooks/usePoint&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Test&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> point = <span class="title function_">usePoint</span>()</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;point&#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h2><ul>
<li>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª ref ï¼ˆObjectRefImplï¼‰å¯¹è±¡ï¼Œå…¶valueå€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡(toRefæ“ä½œçš„å¯¹è±¡)ä¸­çš„æŸä¸ªå±æ€§ã€‚</li>
<li>è¯­æ³•ï¼š<code>const name = toRef(person,&#39;name&#39;)</code><ul>
<li>personï¼šæ“ä½œå“ªä¸ªå¯¹è±¡</li>
<li>nameï¼šæ“ä½œå¯¹è±¡ä¸­çš„å“ªä¸ªå±æ€§</li>
</ul>
</li>
<li>åº”ç”¨:   è¦å°†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å•ç‹¬æä¾›ç»™å¤–éƒ¨ä½¿ç”¨æ—¶ï¼Œä¸æƒ³ä¸¢å¤±å“åº”å¼ï¼Œéœ€è¦ä½¿ç”¨toRef/toRefs<br><img src="/images/toRef.png" alt="img.png"></li>
<li>æ‰©å±•ï¼š<code>toRefs</code> ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†å¯ä»¥æ‰¹é‡åˆ›å»ºå¤šä¸ª ref å¯¹è±¡ï¼Œè¯­æ³•ï¼š<code>toRefs(person)</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, toRef, toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">          <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> x = <span class="title function_">toRefs</span>(person)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// name: toRef(person, &#x27;name&#x27;),</span></span><br><span class="line">      <span class="comment">// age: toRef(person, &#x27;age&#x27;),</span></span><br><span class="line">      <span class="comment">// salary: toRef(person.job.j1, &#x27;salary&#x27;),</span></span><br><span class="line">      ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/toRef%E5%92%8CtoRefs.png" alt="img.png"></p>
<hr>
<h1 id="å…¶å®ƒ-Composition-API"><a href="#å…¶å®ƒ-Composition-API" class="headerlink" title="å…¶å®ƒ Composition API"></a>å…¶å®ƒ Composition API</h1><h2 id="shallowReactive-ä¸-shallowRef"><a href="#shallowReactive-ä¸-shallowRef" class="headerlink" title="shallowReactive ä¸ shallowRef"></a>shallowReactive ä¸ shallowRef</h2><ul>
<li><p>shallowReactiveï¼šåªå¤„ç†å¯¹è±¡æœ€å¤–å±‚å±æ€§çš„å“åº”å¼ï¼ˆæµ…å“åº”å¼ï¼‰ã€‚</p>
</li>
<li><p>reactiveä¸shallowReactiveçš„åŒºåˆ«ï¼š</p>
<ul>
<li>shallowReactiveåªè€ƒè™‘å¯¹è±¡ç±»å‹çš„ç¬¬ä¸€å±‚æ•°æ®çš„å“åº”å¼ï¼Œæ·±å±‚çš„ä¸è€ƒè™‘</li>
</ul>
</li>
<li><p>shallowRefï¼šåªå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼, ä¸è¿›è¡Œå¯¹è±¡çš„å“åº”å¼å¤„ç†ã€‚</p>
</li>
<li><p>refä¸shallowRefçš„åŒºåˆ«ï¼š</p>
<ul>
<li>shallowRefä¸å¯ä»¥å¤„ç†å¯¹è±¡ç±»å‹æ•°æ®çš„å“åº”å¼ï¼Œè€Œrefå¯ä»¥å¤„ç†åŸºç¡€æ•°æ®ç±»å‹å’Œå¯¹è±¡ç±»å‹æ•°æ®ï¼ˆåº•å±‚æ±‚åŠ©äº†reactiveå˜æˆä¸€ä¸ªproxyçš„ä»£ç†å¯¹è±¡ï¼‰çš„å“åº”å¼</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨?</p>
<ul>
<li> å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œç»“æ„æ¯”è¾ƒæ·±, ä½†å˜åŒ–æ—¶åªæ˜¯å¤–å±‚å±æ€§å˜åŒ– ===&gt; shallowReactiveã€‚</li>
<li> å¦‚æœæœ‰ä¸€ä¸ªå¯¹è±¡æ•°æ®ï¼Œåç»­åŠŸèƒ½ä¸ä¼šä¿®æ”¹è¯¥å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ç”Ÿæ–°çš„å¯¹è±¡ï¼ˆå³ç»™shallowRefå®šä¹‰å¯¹è±¡é‡æ–°èµ‹å€¼ï¼‰æ¥æ›¿æ¢ ===&gt; shallowRefã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;shallowReactive, shallowRef, toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">shallowReactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">          <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> x = <span class="title function_">shallowRef</span>(<span class="number">0</span>) <span class="comment">// æ•°æ®å“åº”å¼ä¸å½±å“</span></span><br><span class="line">    <span class="keyword">let</span> y = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">      <span class="attr">z</span>:<span class="number">0</span></span><br><span class="line">    &#125;) <span class="comment">// å¯¹è±¡ç±»å‹æ•°æ®ä¸è€ƒè™‘åšå“åº”å¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      x,</span><br><span class="line">      y,</span><br><span class="line">      ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/shallowRef%E5%92%8CshallowReactive.png" alt="img.png"></p>
<h2 id="readonly-ä¸-shallowReadonly"><a href="#readonly-ä¸-shallowReadonly" class="headerlink" title="readonly ä¸ shallowReadonly"></a>readonly ä¸ shallowReadonly</h2><ul>
<li>readonly: è®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæ·±åªè¯»ï¼‰ã€‚</li>
<li>shallowReadonlyï¼šè®©ä¸€ä¸ªå“åº”å¼æ•°æ®å˜ä¸ºåªè¯»çš„ï¼ˆæµ…åªè¯»ï¼‰ã€‚</li>
<li>åº”ç”¨åœºæ™¯: æ¥æ”¶åˆ«äººçš„æ•°æ®ï¼Œä¸å¸Œæœ›æ•°æ®è¢«ä¿®æ”¹æ—¶ã€‚<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref, toRefs, readonly, shallowReadonly&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">          <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// person = readonly(person)</span></span><br><span class="line">    <span class="comment">// person = shallowReadonly(person)</span></span><br><span class="line">    <span class="comment">// sum = readonly(sum)</span></span><br><span class="line">    <span class="comment">// sum = shallowReadonly(sum)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      sum,</span><br><span class="line">      ...<span class="title function_">toRefs</span>(person)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="toRaw-ä¸-markRaw"><a href="#toRaw-ä¸-markRaw" class="headerlink" title="toRaw ä¸ markRaw"></a>toRaw ä¸ markRaw</h2><ul>
<li>toRaw(rawè¯‘åŸå§‹)ï¼š<ul>
<li>ä½œç”¨ï¼šå°†ä¸€ä¸ªç”±<code>reactive</code>ç”Ÿæˆçš„<strong style="color:orange">å“åº”å¼å¯¹è±¡</strong>è½¬ä¸º<strong style="color:orange">æ™®é€šå¯¹è±¡</strong>ã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼šç”¨äºè¯»å–å“åº”å¼å¯¹è±¡å¯¹åº”çš„æ™®é€šå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªæ™®é€šå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼Œä¸ä¼šå¼•èµ·é¡µé¢æ›´æ–°ã€‚</li>
</ul>
</li>
<li>markRawï¼š<ul>
<li>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶æ°¸è¿œä¸ä¼šå†æˆä¸ºå“åº”å¼å¯¹è±¡ã€‚</li>
<li>åº”ç”¨åœºæ™¯:<ol>
<li>æœ‰äº›å€¼ä¸åº”è¢«è®¾ç½®ä¸ºå“åº”å¼çš„ï¼Œä¾‹å¦‚å¤æ‚çš„ç¬¬ä¸‰æ–¹ç±»åº“ç­‰ã€‚</li>
<li>å½“æ¸²æŸ“å…·æœ‰ä¸å¯å˜æ•°æ®æºçš„å¤§åˆ—è¡¨æ—¶ï¼Œè·³è¿‡å“åº”å¼è½¬æ¢å¯ä»¥æé«˜æ€§èƒ½ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive, ref, toRefs, toRaw, markRaw&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;DEMO&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">job</span>: &#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">          <span class="attr">salary</span>: <span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">const</span> p = <span class="title function_">toRaw</span>(person)</span><br><span class="line">      p.<span class="property">age</span>++</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(p)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> car = &#123; <span class="attr">name</span>: <span class="string">&#x27;å¥”é©°&#x27;</span>, <span class="attr">price</span>: <span class="number">40</span> &#125;</span><br><span class="line">      <span class="comment">//person.car = car // carè‡ªåŠ¨å˜æˆå“åº”å¼ï¼ˆå› ä¸ºproxyä»£ç†ï¼Œå¯ä»¥æ•è·å¯¹è±¡çš„æ“ä½œï¼‰ï¼Œä½†æ˜¯åˆå§‹çŠ¶æ€personæ²¡æœ‰carï¼Œé¡µé¢ä½¿ç”¨æ—¶æ³¨æ„</span></span><br><span class="line">      person.<span class="property">car</span> = <span class="title function_">markRaw</span>(car) <span class="comment">// carè¢«å½“æœ€åŸå§‹çš„æ•°æ®ä½¿ç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>)&#123;</span><br><span class="line">      person.<span class="property">car</span>.<span class="property">price</span>++</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">car</span>.<span class="property">price</span>) <span class="comment">// ç»è¿‡markRaw()å¤„ç†åï¼Œä¿®æ”¹è½¦ä»·æ ¼ï¼Œä»·æ ¼å‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯æ•°æ®ä¸æ˜¯å“åº”å¼çš„ï¼Œé¡µé¢æ— æ³•å±•ç¤ºæ–°ä»·æ ¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      sum,</span><br><span class="line">      person,</span><br><span class="line">      ...<span class="title function_">toRefs</span>(person),</span><br><span class="line">      showRawPerson,</span><br><span class="line">      addCar,</span><br><span class="line">      changePrice</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h2><ul>
<li><p>customRef(customè¯‘è‡ªå®šä¹‰)ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚</p>
</li>
<li><p>å®ç°é˜²æŠ–æ•ˆæœï¼š</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123;ref,customRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>:<span class="string">&#x27;Demo&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">setup</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//è‡ªå®šä¹‰ä¸€ä¸ªrefâ€”â€”åä¸ºï¼šmyRef</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value,delay</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> timer</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//é€šè¿‡customRefå»å®ç°è‡ªå®šä¹‰ï¼Œreturnå‡ºå­å®šä¹‰ref</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>&#123; <span class="comment">// returnå¯¹è±¡ï¼Œè¯­æ³•è¦æ±‚</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººä»myRefè¿™ä¸ªå®¹å™¨ä¸­è¯»å–æ•°æ®äº†ï¼Œæˆ‘æŠŠ<span class="subst">$&#123;value&#125;</span>ç»™ä»–äº†`</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">track</span>() <span class="comment">//é€šçŸ¥Vueâ€œè¿½è¸ªâ€æ•°æ®ï¼ˆvalueï¼‰çš„å˜åŒ–(æå‰ä¸getå•†é‡ä¸€ä¸‹ï¼Œè®©ä»–è®¤ä¸ºvalueæ˜¯æœ‰ç”¨çš„)</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">return</span> value <span class="comment">// æ­¥éª¤3</span></span></span><br><span class="line"><span class="language-javascript">                        &#125;,</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">set</span>(<span class="params">newValue</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æœ‰äººæŠŠmyRefè¿™ä¸ªå®¹å™¨ä¸­æ•°æ®æ”¹ä¸ºäº†ï¼š<span class="subst">$&#123;newValue&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">                            <span class="built_in">clearTimeout</span>(timer) <span class="comment">// é˜²æŠ–ï¼Œä¸€ç›´å¿«é€Ÿè¾“å…¥æ—¶ç­‰åˆ°åœæ­¢è¾“å…¥åï¼Œdelayæ—¶åh3æ ‡ç­¾ä¸­å±•ç¤ºè¾“å…¥ä¿¡æ¯</span></span></span><br><span class="line"><span class="language-javascript">                            timer = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                                value = newValue <span class="comment">// éœ€è¦æ›´æ–°valueï¼Œå› ä¸ºgetä¸­ä½¿ç”¨valueï¼Œæ­¥éª¤1</span></span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">trigger</span>() <span class="comment">//é€šçŸ¥Vueé‡æ–°è§£ææ¨¡æ¿ï¼ˆæ›´æ–°ç•Œé¢ï¼‰ï¼Œæ­¥éª¤2</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;,delay)</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// let keyword = ref(&#x27;hello&#x27;) //ä½¿ç”¨Vueæä¾›çš„å†…ç½®ref</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">let</span> keyword = <span class="title function_">myRef</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">500</span>) <span class="comment">//ä½¿ç”¨ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ref</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                keyword</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="provide-ä¸-inject"><a href="#provide-ä¸-inject" class="headerlink" title="provide ä¸ inject"></a>provide ä¸ inject</h2><p><img src="/images/provide.png" alt="img.png"></p>
<ul>
<li><p>ä½œç”¨ï¼šå®ç°<strong style="color:#DD5145">ç¥–ä¸åä»£ç»„ä»¶é—´(è·¨çº§ç»„ä»¶)</strong>é€šä¿¡</p>
</li>
<li><p>å¥—è·¯ï¼šçˆ¶ç»„ä»¶æœ‰ä¸€ä¸ª <code>provide</code> é€‰é¡¹æ¥æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æœ‰ä¸€ä¸ª <code>inject</code> é€‰é¡¹æ¥å¼€å§‹ä½¿ç”¨è¿™äº›æ•°æ®</p>
</li>
<li><p>è¯­æ³•ï¼š</p>
<ul>
<li>provide(â€˜ä¼ é€’çš„åç§°â€™, è¦ä¼ é€’çš„å†…å®¹)</li>
<li>let name = inject(â€˜ä¼ é€’çš„åç§°â€™)</li>
</ul>
</li>
<li><p>å…·ä½“å†™æ³•ï¼š</p>
<ul>
<li><p>ç¥–ç»„ä»¶ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;å¥”é©°&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40ä¸‡&#x27;</span>&#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>åä»£ç»„ä»¶ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params">props,context</span>)&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;car&#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="å“åº”å¼æ•°æ®çš„åˆ¤æ–­"><a href="#å“åº”å¼æ•°æ®çš„åˆ¤æ–­" class="headerlink" title="å“åº”å¼æ•°æ®çš„åˆ¤æ–­"></a>å“åº”å¼æ•°æ®çš„åˆ¤æ–­</h2><ul>
<li>isRef: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª<code>ref</code>å¯¹è±¡</li>
<li>isReactive: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</li>
<li>isReadonly: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</li>
<li>isProxy: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly(ä½œç”¨çš„å“åº”å¼éƒ½å¯¹è±¡)</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;å¥”é©°&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;40ä¸‡&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">let</span> car2 = <span class="title function_">readonly</span>(car)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(sum)) <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(car)) <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReadonly</span>(car2)) <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(car)) <span class="comment">// true</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(sum)) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h1><h2 id="Options-API-é…ç½®å¼-å­˜åœ¨çš„é—®é¢˜"><a href="#Options-API-é…ç½®å¼-å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="Options API(é…ç½®å¼) å­˜åœ¨çš„é—®é¢˜"></a>Options API(é…ç½®å¼) å­˜åœ¨çš„é—®é¢˜</h2><p>ä½¿ç”¨ä¼ ç»ŸOptionsAPIä¸­ï¼Œæ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«åœ¨dataï¼Œmethodsï¼Œcomputedé‡Œä¿®æ”¹ ã€‚</p>
<iframe
src="/images/OptionsAPI01.mp4"
scrolling="no"
border="0"
frameborder="no"
framespacing="0"
allowfullscreen="true"
height=600
width=800>
</iframe>
<iframe
src="/images/OptionsAPI02.mp4"
scrolling="no"
border="0"
frameborder="no"
framespacing="0"
allowfullscreen="true"
height=600
width=800>
</iframe>
## Composition APIï¼ˆç»„åˆå¼ï¼‰ çš„ä¼˜åŠ¿

<p>æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…çš„ç»„ç»‡æˆ‘ä»¬çš„ä»£ç ï¼Œå‡½æ•°ã€‚è®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·â€“å€ŸåŠ©hookå‡½æ•°ã€‚</p>
<iframe
src="/images/OptionsAPI03.mp4"
scrolling="no"
border="0"
frameborder="no"
framespacing="0"
allowfullscreen="true"
height=600
width=800>
</iframe>
<iframe
src="/images/OptionsAPI04.mp4"
scrolling="no"
border="0"
frameborder="no"
framespacing="0"
allowfullscreen="true"
height=600
width=800>
</iframe>

<hr>
<h1 id="æ–°çš„ç»„ä»¶"><a href="#æ–°çš„ç»„ä»¶" class="headerlink" title="æ–°çš„ç»„ä»¶"></a>æ–°çš„ç»„ä»¶</h1><h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><ul>
<li>åœ¨Vue2ä¸­: ç»„ä»¶å¿…é¡»æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</li>
<li>åœ¨Vue3ä¸­: ç»„ä»¶å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾, å†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ªFragmentè™šæ‹Ÿå…ƒç´ ä¸­</li>
<li>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</li>
</ul>
<h2 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h2><ul>
<li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” <code>Teleport</code> æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong style="color:#DD5145">ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li>
<li>toç§»åŠ¨ä½ç½®å€¼ï¼š<ul>
<li>htmlã€bodyæ ‡ç­¾</li>
<li>cssé€‰æ‹©å™¨(#id,.class)<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;ç§»åŠ¨ä½ç½®&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;mask&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="Suspense"><a href="#Suspense" class="headerlink" title="Suspense"></a>Suspense</h2><ul>
<li><p>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</p>
</li>
<li><p>Suspenseåº•å±‚ä½¿ç”¨æ’æ§½å®ç°çš„</p>
<ul>
<li>v-slot:defaultï¼šé»˜è®¤å±•ç¤ºï¼ŒçœŸæ­£éœ€è¦å±•ç¤ºå†…å®¹</li>
<li>v-slot:fallbackï¼šåŠ è½½æ…¢å±•ç¤ºå†…å®¹</li>
</ul>
</li>
<li><p>ä½¿ç”¨åœºæ™¯</p>
<ul>
<li>ç½‘é€Ÿæ…¢</li>
<li>ä½¿ç”¨promise</li>
</ul>
</li>
<li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ul>
<li><p>å¼‚æ­¥å¼•å…¥ç»„ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ä¸­å¼•å…¥å­ç»„ä»¶</span></span><br><span class="line"><span class="comment">// import Child from &#x27;./components/Child.vue&#x27; // é™æ€å¼•å…¥(çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶å†…å®¹ä¸€èµ·æ¸²æŸ“å‡ºæ¥)</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>)) <span class="comment">// åŠ¨æ€å¼•å…¥ï¼ˆå¼‚æ­¥å¼•å…¥ï¼‰ï¼ˆçˆ¶ç»„ä»¶å…ˆæ¸²æŸ“å‡ºæ¥ï¼Œç„¶åæ—¶å­ç»„ä»¶æ¸²æŸ“å‡ºæ¥ï¼‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">setup</span>(<span class="params"></span>)&#123; <span class="comment">// å¼•å…¥childä½¿ç”¨å¼‚æ­¥å¼•å…¥ï¼Œsetupä¸­å¯ä»¥ä½¿ç”¨asyncï¼Œawaitï¼Œpromise</span></span><br><span class="line">   <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">   <span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">resolve</span>(&#123;sum&#125;)</span><br><span class="line">      &#125;, <span class="number">3000</span>)        </span><br><span class="line">   &#125;)</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">await</span> p</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æˆ‘æ˜¯Appç»„ä»¶<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>&gt;</span></span><br><span class="line">                 <span class="comment">&lt;!-- é»˜è®¤å±•ç¤ºï¼šçœŸæ­£å±•ç¤ºå†…å®¹ defaultå›ºå®š --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">Child</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:fallback</span>&gt;</span></span><br><span class="line">                  <span class="comment">&lt;!-- åŠ è½½æ…¢å±•ç¤ºå†…å®¹ fallbackå›ºå®š--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½ä¸­.....<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="å…¨å±€APIçš„è½¬ç§»"><a href="#å…¨å±€APIçš„è½¬ç§»" class="headerlink" title="å…¨å±€APIçš„è½¬ç§»"></a>å…¨å±€APIçš„è½¬ç§»</h2><ul>
<li><p>Vue 2.x æœ‰è®¸å¤šå…¨å±€ API å’Œé…ç½®ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼šæ³¨å†Œå…¨å±€ç»„ä»¶ã€æ³¨å†Œå…¨å±€æŒ‡ä»¤ç­‰ã€‚<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œå…¨å±€æŒ‡ä»¤</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Vue3.0ä¸­å¯¹è¿™äº›APIåšå‡ºäº†è°ƒæ•´ï¼š</p>
<ul>
<li><p>å°†å…¨å±€çš„APIï¼Œå³ï¼š<code>Vue.xxx</code>è°ƒæ•´åˆ°åº”ç”¨å®ä¾‹ï¼ˆ<code>app</code>ï¼‰ä¸Š</p>
<table>
<thead>
<tr>
<th>2.x å…¨å±€ APIï¼ˆ<code>Vue</code>ï¼‰</th>
<th>3.x å®ä¾‹ API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">ç§»é™¤</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h2 id="å…¶ä»–æ”¹å˜"><a href="#å…¶ä»–æ”¹å˜" class="headerlink" title="å…¶ä»–æ”¹å˜"></a>å…¶ä»–æ”¹å˜</h2><ul>
<li><p>dataé€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p>
</li>
<li><p>è¿‡åº¦ç±»åçš„æ›´æ”¹ï¼š</p>
<ul>
<li><p>Vue2.xå†™æ³•</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Vue3.xå†™æ³•</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">ç§»é™¤</strong>keyCodeä½œä¸º v-on çš„ä¿®é¥°ç¬¦ï¼ŒåŒæ—¶ä¹Ÿä¸å†æ”¯æŒ<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">ç§»é™¤</strong><code>v-on.native</code>ä¿®é¥°ç¬¦</p>
<ul>
<li><p>çˆ¶ç»„ä»¶ä¸­ç»‘å®šäº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>å­ç»„ä»¶ä¸­å£°æ˜è‡ªå®šä¹‰äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">ç§»é™¤</strong>è¿‡æ»¤å™¨ï¼ˆfilterï¼‰</p>
<blockquote>
<p>è¿‡æ»¤å™¨è™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†å®ƒéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰è¯­æ³•ï¼Œæ‰“ç ´å¤§æ‹¬å·å†…è¡¨è¾¾å¼æ˜¯ â€œåªæ˜¯ JavaScriptâ€ çš„å‡è®¾ï¼Œè¿™ä¸ä»…æœ‰å­¦ä¹ æˆæœ¬ï¼Œè€Œä¸”æœ‰å®ç°æˆæœ¬ï¼å»ºè®®ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§å»æ›¿æ¢è¿‡æ»¤å™¨ã€‚</p>
</blockquote>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">å°è˜‘è‡ğŸ„</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/2023/10/07/Vue3/">http://example.com/2023/10/07/Vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://example.com" target="_blank">å°è˜‘è‡ğŸ„</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a></div><div class="post_share"><div class="social-share" data-image="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/10/07/vue3+TypeScript/"><img class="next-cover" src="https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Vue3+TypeScript</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="toc-number">1.</span> <span class="toc-text">Vue3å¿«é€Ÿä¸Šæ‰‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">Vue3ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E5%B8%A6%E6%9D%A5%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-number">1.2.</span> <span class="toc-text">Vue3å¸¦æ¥äº†ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="toc-number">1.2.1.</span> <span class="toc-text">æ€§èƒ½çš„æå‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="toc-number">1.2.2.</span> <span class="toc-text">æºç çš„å‡çº§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E6%8A%B1TypeScript"><span class="toc-number">1.2.3.</span> <span class="toc-text">æ‹¥æŠ±TypeScript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">1.2.4.</span> <span class="toc-text">æ–°çš„ç‰¹æ€§</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAVue3-0%E5%B7%A5%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">åˆ›å»ºVue3.0å·¥ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vue-cli-%E5%88%9B%E5%BB%BA"><span class="toc-number">2.1.</span> <span class="toc-text">ä½¿ç”¨ vue-cli åˆ›å»º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-vite-%E5%88%9B%E5%BB%BA"><span class="toc-number">2.2.</span> <span class="toc-text">ä½¿ç”¨ vite åˆ›å»º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">åˆ†æå·¥ç¨‹ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue2"><span class="toc-number">2.3.1.</span> <span class="toc-text">vue2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3"><span class="toc-number">2.3.2.</span> <span class="toc-text">vue3</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8-Composition-API"><span class="toc-number">3.</span> <span class="toc-text">å¸¸ç”¨ Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%89%E5%BC%80%E5%BA%8F%E5%B9%95%E7%9A%84setup"><span class="toc-number">3.1.</span> <span class="toc-text">æ‹‰å¼€åºå¹•çš„setup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">refå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reactive%E5%87%BD%E6%95%B0"><span class="toc-number">3.3.</span> <span class="toc-text">reactiveå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-0%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86"><span class="toc-number">3.4.</span> <span class="toc-text">Vue3.0ä¸­çš„å“åº”å¼åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue2-x%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">3.4.1.</span> <span class="toc-text">vue2.xçš„å“åº”å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vue3-0%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">3.4.2.</span> <span class="toc-text">Vue3.0çš„å“åº”å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reactive%E5%AF%B9%E6%AF%94ref"><span class="toc-number">3.5.</span> <span class="toc-text">reactiveå¯¹æ¯”ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setup%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">3.6.</span> <span class="toc-text">setupçš„ä¸¤ä¸ªæ³¨æ„ç‚¹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E4%B8%8E%E7%9B%91%E8%A7%86"><span class="toc-number">3.7.</span> <span class="toc-text">è®¡ç®—å±æ€§ä¸ç›‘è§†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E5%87%BD%E6%95%B0"><span class="toc-number">3.7.1.</span> <span class="toc-text">computedå‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watch%E5%87%BD%E6%95%B0"><span class="toc-number">3.7.2.</span> <span class="toc-text">watchå‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchEffect%E5%87%BD%E6%95%B0"><span class="toc-number">3.7.3.</span> <span class="toc-text">watchEffectå‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.8.</span> <span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89hook%E5%87%BD%E6%95%B0"><span class="toc-number">3.9.</span> <span class="toc-text">è‡ªå®šä¹‰hookå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRef"><span class="toc-number">3.10.</span> <span class="toc-text">toRef</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E5%AE%83-Composition-API"><span class="toc-number">4.</span> <span class="toc-text">å…¶å®ƒ Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#shallowReactive-%E4%B8%8E-shallowRef"><span class="toc-number">4.1.</span> <span class="toc-text">shallowReactive ä¸ shallowRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#readonly-%E4%B8%8E-shallowReadonly"><span class="toc-number">4.2.</span> <span class="toc-text">readonly ä¸ shallowReadonly</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#toRaw-%E4%B8%8E-markRaw"><span class="toc-number">4.3.</span> <span class="toc-text">toRaw ä¸ markRaw</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#customRef"><span class="toc-number">4.4.</span> <span class="toc-text">customRef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#provide-%E4%B8%8E-inject"><span class="toc-number">4.5.</span> <span class="toc-text">provide ä¸ inject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%A4%E6%96%AD"><span class="toc-number">4.6.</span> <span class="toc-text">å“åº”å¼æ•°æ®çš„åˆ¤æ–­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">5.</span> <span class="toc-text">Composition API çš„ä¼˜åŠ¿</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Options-API-%E9%85%8D%E7%BD%AE%E5%BC%8F-%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">Options API(é…ç½®å¼) å­˜åœ¨çš„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">æ–°çš„ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Fragment"><span class="toc-number">6.1.</span> <span class="toc-text">Fragment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Teleport"><span class="toc-number">6.2.</span> <span class="toc-text">Teleport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Suspense"><span class="toc-number">6.3.</span> <span class="toc-text">Suspense</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">7.</span> <span class="toc-text">å…¶ä»–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80API%E7%9A%84%E8%BD%AC%E7%A7%BB"><span class="toc-number">7.1.</span> <span class="toc-text">å…¨å±€APIçš„è½¬ç§»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98"><span class="toc-number">7.2.</span> <span class="toc-text">å…¶ä»–æ”¹å˜</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024  <i id="heartbeat" class="fa fas fa-heartbeat"></i> å°è˜‘è‡ğŸ„</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@4.2.0/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@4.2.0/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@4.2.0/source/js/search/local-search.min.js"></script><div class="js-pjax"></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="å¯Œå¼º,æ°‘ä¸»,æ–‡æ˜,å’Œè°,å¹³ç­‰,å…¬æ­£,æ³•æ²»,çˆ±å›½,æ•¬ä¸š,è¯šä¿¡,å‹å–„" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>